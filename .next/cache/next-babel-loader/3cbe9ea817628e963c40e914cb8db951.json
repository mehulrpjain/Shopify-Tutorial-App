{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/esm/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/esm/createClass\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/esm/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/esm/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/esm/getPrototypeOf\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/esm/defineProperty\"));\n\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/esm/taggedTemplateLiteral\"));\n\nvar _graphqlTag = _interopRequireDefault(require(\"graphql-tag\"));\n\nvar _reactApollo = require(\"react-apollo\");\n\nvar _polaris = require(\"@shopify/polaris\");\n\nvar _storeJs = _interopRequireDefault(require(\"store-js\"));\n\nvar _actions = require(\"@shopify/app-bridge/actions\");\n\nvar _appBridgeReact = require(\"@shopify/app-bridge-react\");\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _templateObject() {\n  var data = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n    query getProducts($ids: [ID!]!){\\n        nodes(ids: $ids){\\n            ... on Product{\\n                title\\n                handle\\n                descriptionHtml\\n                id\\n                images(first:1){\\n                    edges {\\n                        node {\\n                            originalSrc\\n                            altText\\n                        }\\n                    }\\n                }\\n                variants(first: 1){\\n                    edges{\\n                        node{\\n                            price\\n                            id\\n                        }\\n                    }\\n                }\\n            }\\n        }\\n    }\\n    \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nvar GET_PRODUCTS_BY_ID = (0, _graphqlTag[\"default\"])(_templateObject());\n\nvar ResourceListwithProducts = /*#__PURE__*/function (_React$Component) {\n  (0, _inherits2[\"default\"])(ResourceListwithProducts, _React$Component);\n\n  var _super = _createSuper(ResourceListwithProducts);\n\n  function ResourceListwithProducts() {\n    (0, _classCallCheck2[\"default\"])(this, ResourceListwithProducts);\n    return _super.apply(this, arguments);\n  }\n\n  (0, _createClass2[\"default\"])(ResourceListwithProducts, [{\n    key: \"render\",\n    value: function render() {\n      var app = this.context;\n\n      var redirectToProduct = function redirectToProduct() {\n        var redirect = _actions.Redirect.create(app);\n\n        redirect.dispatch(_actions.Redirect.Action.APP, '/edit-products');\n      };\n\n      var twoWeeksFromNow = new Date(Date.now() + 12096e5).toDateString();\n      return __jsx(_reactApollo.Query, {\n        query: GET_PRODUCTS_BY_ID,\n        variables: {\n          ids: _storeJs[\"default\"].get('ids')\n        }\n      }, function (_ref) {\n        var data = _ref.data,\n            loading = _ref.loading,\n            error = _ref.error;\n        if (loading) return __jsx(\"div\", null, \"Loading...\");\n        if (error) return __jsx(\"div\", null, error.message);\n        console.log(data);\n        return __jsx(_polaris.Card, null, __jsx(_polaris.ResourceList, {\n          showHeader: true,\n          resourceName: {\n            singular: 'Product',\n            plural: 'Products'\n          },\n          items: data.nodes,\n          renderItem: function renderItem(item) {\n            var media = __jsx(_polaris.Thumbnail, {\n              source: item.images.edges[0] ? item.images.edges[0].node.originalSrc : '',\n              alt: item.images.edges[0] ? item.images.edges[0].node.altText : ''\n            });\n\n            var price = item.variants.edges[0].node.price;\n            return __jsx(_polaris.ResourceList.Item, {\n              id: item.id,\n              media: media,\n              accessibilityLabel: \"View details for \".concat(item.title),\n              onClick: function onClick() {\n                _storeJs[\"default\"].set('item', item);\n\n                redirectToProduct();\n              }\n            }, __jsx(_polaris.Stack, null, __jsx(_polaris.Stack.Item, {\n              fill: true\n            }, __jsx(\"h3\", null, __jsx(_polaris.TextStyle, {\n              variation: \"strong\"\n            }, item.title))), __jsx(_polaris.Stack.Item, null, __jsx(\"p\", null, \"$\", price)), __jsx(_polaris.Stack.Item, null, __jsx(\"p\", null, \"Expires on \", twoWeeksFromNow))));\n          }\n        }));\n      });\n    }\n  }]);\n  return ResourceListwithProducts;\n}(React.Component); //export default ResourceListwithProducts;\n\n\n(0, _defineProperty2[\"default\"])(ResourceListwithProducts, \"contextType\", _appBridgeReact.Context);\nmodule.exports = ResourceListwithProducts;","map":{"version":3,"sources":["C:/Users/mehul/Documents/Development/Shopify/shopify-app/components/ResourceList.js"],"names":["GET_PRODUCTS_BY_ID","gql","ResourceListwithProducts","app","context","redirectToProduct","redirect","Redirect","create","dispatch","Action","APP","twoWeeksFromNow","Date","now","toDateString","ids","store","get","data","loading","error","message","console","log","singular","plural","nodes","item","media","images","edges","node","originalSrc","altText","price","variants","id","title","set","React","Component","Context","module","exports"],"mappings":"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","sourcesContent":["import gql from 'graphql-tag';\r\nimport { Query } from 'react-apollo';\r\nimport { Card, ResourceList, Stack, TextStyle, Thumbnail } from '@shopify/polaris';\r\nimport store from 'store-js';\r\nimport { Redirect } from '@shopify/app-bridge/actions';\r\nimport { Context } from '@shopify/app-bridge-react';\r\n\r\nconst GET_PRODUCTS_BY_ID = gql`\r\n    query getProducts($ids: [ID!]!){\r\n        nodes(ids: $ids){\r\n            ... on Product{\r\n                title\r\n                handle\r\n                descriptionHtml\r\n                id\r\n                images(first:1){\r\n                    edges {\r\n                        node {\r\n                            originalSrc\r\n                            altText\r\n                        }\r\n                    }\r\n                }\r\n                variants(first: 1){\r\n                    edges{\r\n                        node{\r\n                            price\r\n                            id\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    `;\r\n\r\nclass ResourceListwithProducts extends React.Component{\r\n\r\n    static contextType = Context;\r\n\r\n    render(){\r\n        const app = this.context;\r\n        const redirectToProduct = () => {\r\n            const redirect = Redirect.create(app);\r\n            redirect.dispatch(\r\n            Redirect.Action.APP,\r\n            '/edit-products',\r\n            );\r\n        };\r\n        \r\n        const twoWeeksFromNow = new Date(Date.now() + 12096e5).toDateString();\r\n\r\n        return(\r\n            <Query query={GET_PRODUCTS_BY_ID} variables={{ ids: store.get('ids') }}>\r\n            {({ data,loading,error}) => {\r\n                    if (loading) return <div>Loading...</div>;\r\n                    if (error) return <div>{error.message}</div>;\r\n                console.log(data);\r\n                return (\r\n                    <Card>\r\n                        <ResourceList\r\n                            showHeader\r\n                            resourceName={{singular: 'Product', plural: 'Products'}}\r\n                            items={data.nodes}\r\n                            renderItem={item => {\r\n                                const media = (\r\n                                    <Thumbnail\r\n                                        source={\r\n                                            item.images.edges[0]\r\n                                            ? item.images.edges[0].node.originalSrc\r\n                                            : ''\r\n                                        }\r\n                                        alt={\r\n                                            item.images.edges[0]\r\n                                            ? item.images.edges[0].node.altText\r\n                                            : ''\r\n                                        }\r\n                                    />\r\n                                );\r\n                                const price = item.variants.edges[0].node.price;\r\n                                return(\r\n                                    <ResourceList.Item\r\n                                    id = {item.id}\r\n                                    media = {media}\r\n                                    accessibilityLabel={`View details for ${item.title}`}\r\n                                    onClick={() => {\r\n                                        store.set('item', item);\r\n                                        redirectToProduct();\r\n                                      }}\r\n                                    >\r\n                                    <Stack>\r\n                                        <Stack.Item fill>\r\n                                            <h3>\r\n                                                <TextStyle variation=\"strong\">\r\n                                                    {item.title}\r\n                                                </TextStyle>\r\n                                            </h3>\r\n                                        </Stack.Item>\r\n                                        <Stack.Item>\r\n                                            <p>${price}</p>\r\n                                        </Stack.Item>\r\n                                        <Stack.Item>\r\n                                            <p>Expires on {twoWeeksFromNow}</p>\r\n                                        </Stack.Item>\r\n                                    </Stack>\r\n                                    </ResourceList.Item>\r\n                                );\r\n                            }}>\r\n                        </ResourceList>\r\n                    </Card>\r\n                );\r\n            }}\r\n            </Query>\r\n        );\r\n    }\r\n}\r\n\r\n//export default ResourceListwithProducts;\r\nmodule.exports = ResourceListwithProducts;"]},"metadata":{},"sourceType":"script"}